#! /usr/bin/env janetsh
(import sh)

# FIXME use an assert macro that
# prints what we wanted and what we got.

(defn e [s] (first (sh/expand s)))

(when (not= (e "$PWD") (os/cwd))
  (error "fail1"))

(when (not= (e "~") (os/getenv "HOME"))
  (error "fail2"))

(when (not= (e "~/~/$$$PWD/foo$XXXUNDEFINEDXXX")
            (string (os/getenv "HOME") "/~/$" (os/cwd) "/foo"))
  (error "fail3"))